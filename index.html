<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Крутилка с шансами</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
            transition: background-color 0.5s;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
        }
        
        .result {
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
            min-height: 50px;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .normal { color: black; }
        .uncommon { color: green; }
        .epic { color: blue; }
        .legendary { color: purple; }
        .mythic { color: orange; }
        .shadow { color: gray; text-shadow: 0 0 5px rgba(0,0,0,0.5); }
        .king { color: gold; text-shadow: 0 0 5px rgba(0,0,0,0.5); }
        .angel { color: lightblue; text-shadow: 0 0 5px rgba(0,0,0,0.5); }
        .god { color: red; text-shadow: 0 0 10px gold; font-size: 32px; animation: godAnimation 0.5s infinite alternate; }
        .death { color: black; background-color: red; text-shadow: 0 0 10px black; font-size: 32px; animation: deathAnimation 0.1s infinite; }
        .eternity { color: white; background-color: black; text-shadow: 0 0 10px white; font-size: 32px; animation: eternityAnimation 3s infinite; }
        .heart { color: darkred; text-shadow: 0 0 5px rgba(0,0,0,0.5); font-size: 32px; animation: heartAnimation 1s infinite; }
        .glitch { color: #9b59b6; animation: glitch-anim 0.3s infinite; }
        .blaster { color: #3498db; text-shadow: 0 0 10px #2980b9; font-size: 32px; }
        .omega { color: #e74c3c; text-shadow: 0 0 10px #c0392b; font-size: 40px; }
        .purple { color: #8e44ad; text-shadow: 0 0 5px rgba(0,0,0,0.5); }
        
        @keyframes godAnimation { from { text-shadow: 0 0 10px gold; } to { text-shadow: 0 0 20px red; } }
        @keyframes deathAnimation { 0% { background-color: red; color: black; } 50% { background-color: black; color: red; } 100% { background-color: red; color: black; } }
        @keyframes eternityAnimation { 0% { text-shadow: 0 0 10px white; } 50% { text-shadow: 0 0 20px silver; } 100% { text-shadow: 0 0 10px white; } }
        @keyframes heartAnimation { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes glitch-anim { 0% { transform: translate(0); } 20% { transform: translate(-3px, 3px); } 40% { transform: translate(-3px, -3px); } 60% { transform: translate(3px, 3px); } 80% { transform: translate(3px, -3px); } 100% { transform: translate(0); } }
        @keyframes blaster-blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        
        .spin-btn {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px 2px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .spin-btn:hover { background-color: #45a049; }
        .spin-btn:disabled { background-color: #cccccc; cursor: not-allowed; }
        
        .cooldown {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .stat {
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
            margin: 5px;
        }
        
        .shop {
            margin-top: 30px;
            text-align: left;
            border-top: 1px solid #ddd;
            padding-top: 20px;
        }
        
        .shop h2 { text-align: center; }
        
        .shop-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        
        .shop-btn {
            background-color: #2196F3;
            border: none;
            color: white;
            padding: 8px 16px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .shop-btn:hover { background-color: #0b7dda; }
        .shop-btn:disabled { background-color: #cccccc; cursor: not-allowed; }
        
        .settings {
            margin-top: 30px;
            border-top: 1px solid #ddd;
            padding-top: 20px;
        }
        
        .settings h2 { text-align: center; }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .switch input { 
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #2196F3;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .dark-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
        }
        
        .gold-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: gold; z-index: 999; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
        .red-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: red; z-index: 998; opacity: 0; pointer-events: none; transition: opacity 0.1s; }
        .white-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: white; z-index: 997; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
        .blue-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #3498db; z-index: 996; opacity: 0; pointer-events: none; transition: opacity 0.1s; }
        
        .rarity-chances {
            margin-top: 20px;
            text-align: left;
        }
        
        .rarity-chance {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
        }
        
        .library {
            margin-top: 30px;
            border-top: 1px solid #ddd;
            padding-top: 20px;
        }
        
        .library h2 { text-align: center; }
        .library-item { padding: 5px 0; text-align: left; }
        
        .typing-text { font-size: 24px; color: black; white-space: pre; }
        .heart-beat { animation: heartBeat 0.8s infinite; }
        
        @keyframes heartBeat { 0% { transform: scale(1); } 25% { transform: scale(1.1); } 50% { transform: scale(1); } 75% { transform: scale(1.1); } 100% { transform: scale(1); } }
        
        .omega-attack { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2000; }
        .omega-dark-screen { position: absolute; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); transition: opacity 1s; }
        .omega-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 72px; font-weight: bold; color: #ff0000; text-shadow: 0 0 20px #ff0000; opacity: 0; }
        .omega-heart { position: absolute; font-size: 40px; color: red; opacity: 0; transition: opacity 0.5s; }
        
        @keyframes omega-rotate { 0% { transform: rotate(0deg) translateX(150px) rotate(0deg); } 100% { transform: rotate(360deg) translateX(150px) rotate(-360deg); } }
        @keyframes omega-shake { 0%, 100% { transform: translate(-50%, -50%) rotate(0deg); } 25% { transform: translate(-50%, -50%) rotate(5deg); } 75% { transform: translate(-50%, -50%) rotate(-5deg); } }
    </style>
</head>
<body>
    <div class="container">
        <h1>Крутилка с шансами</h1>
        
        <div class="stats">
            <div class="stat">Монеты: <span id="coins">0</span></div>
        </div>
        
        <div class="result" id="result">Нажмите "Крутить"</div>
        
        <button class="spin-btn" id="spin-btn">Крутить</button>
        <div class="cooldown" id="cooldown">Готово к использованию</div>
        
        <div class="rarity-chances">
            <h3>Шансы выпадения:</h3>
            <div class="rarity-chance normal-chance"><span>Обычно:</span> <span>33.33%</span></div>
            <div class="rarity-chance uncommon-chance"><span>Необычно:</span> <span>20%</span></div>
            <div class="rarity-chance epic-chance"><span>Эпик:</span> <span>10%</span></div>
            <div class="rarity-chance legendary-chance"><span>Легенда:</span> <span>5%</span></div>
            <div class="rarity-chance mythic-chance"><span>Миф:</span> <span>2.86%</span></div>
            <div class="rarity-chance shadow-chance"><span>Тень:</span> <span>2%</span></div>
            <div class="rarity-chance purple-chance"><span>Фиолетовый:</span> <span>1.33%</span></div>
            <div class="rarity-chance king-chance"><span>Король:</span> <span>1%</span></div>
            <div class="rarity-chance angel-chance"><span>Ангел:</span> <span>0.5%</span></div>
            <div class="rarity-chance god-chance"><span>Божество:</span> <span>0.2%</span></div>
            <div class="rarity-chance death-chance"><span>СМЕРТЬ:</span> <span>0.06%</span></div>
            <div class="rarity-chance eternity-chance"><span>ВЕЧНОСТЬ:</span> <span>0.03%</span></div>
            <div class="rarity-chance heart-chance"><span>СЕРДЦЕ:</span> <span>0.015%</span></div>
            <div class="rarity-chance glitch-chance"><span>GLITCH:</span> <span>0.025%</span></div>
            <div class="rarity-chance blaster-chance"><span>BLASTER:</span> <span>0.01%</span></div>
            <div class="rarity-chance omega-chance"><span>ОМЕГА:</span> <span>0.001%</span></div>
        </div>
        
        <div class="library">
            <h2>Библиотека</h2>
            <div id="library-items">
                <div class="library-item">Пока ничего не найдено...</div>
            </div>
        </div>
        
        <div class="shop">
            <h2>Магазин</h2>
            
            <div class="shop-item">
                <div>
                    <strong>Уменьшить перезарядку на 0.5 сек</strong><br>
                    <small>Текущая перезарядка: <span id="current-cooldown">5</span> сек</small>
                </div>
                <button class="shop-btn" id="upgrade-cooldown">25 монет</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>Убрать "Обычно" из результатов</strong><br>
                    <small>Увеличивает шансы других редкостей</small>
                </div>
                <button class="shop-btn" id="remove-normal">125 монет</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>Убрать "Необычно" из результатов</strong><br>
                    <small>Увеличивает шансы других редкостей</small>
                </div>
                <button class="shop-btn" id="remove-uncommon">250 монет</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>Убрать "Эпик" из результатов</strong><br>
                    <small>Увеличивает шансы других редкостей</small>
                </div>
                <button class="shop-btn" id="remove-epic">500 монет</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>Убрать "Легенду" из результатов</strong><br>
                    <small>Увеличивает шансы других редкостей</small>
                </div>
                <button class="shop-btn" id="remove-legendary">1000 монет</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>Убрать "Миф" из результатов</strong><br>
                    <small>Увеличивает шансы других редкостей</small>
                </div>
                <button class="shop-btn" id="remove-mythic">2000 монет</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>Убрать "Тень" из результатов</strong><br>
                    <small>Увеличивает шансы других редкостей</small>
                </div>
                <button class="shop-btn" id="remove-shadow">5000 монет</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>Убрать "Фиолетовый" из результатов</strong><br>
                    <small>Увеличивает шансы других редкостей</small>
                </div>
                <button class="shop-btn" id="remove-purple">7500 монет</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>Убрать "Король" из результатов</strong><br>
                    <small>Увеличивает шансы других редкостей</small>
                </div>
                <button class="shop-btn" id="remove-king">10000 монет</button>
            </div>
            
            <div class="shop-item">
                <div>
                    <strong>Убрать "Ангел" из результатов</strong><br>
                    <small>Увеличивает шансы других редкостей</small>
                </div>
                <button class="shop-btn" id="remove-angel">25000 монет</button>
            </div>
        </div>
        
        <div class="settings">
            <h2>Настройки анимаций</h2>
            
            <div class="setting-item">
                <span>Анимация Божества</span>
                <label class="switch">
                    <input type="checkbox" id="toggle-god" checked>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="setting-item">
                <span>Анимация Вечности</span>
                <label class="switch">
                    <input type="checkbox" id="toggle-eternity" checked>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="setting-item">
                <span>Анимация Смерти</span>
                <label class="switch">
                    <input type="checkbox" id="toggle-death" checked>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="setting-item">
                <span>Анимация Сердца</span>
                <label class="switch">
                    <input type="checkbox" id="toggle-heart" checked>
                    <span class="slider"></span>
                </label>
            </div>
        </div>
    </div>
    
    <div class="dark-screen" id="dark-screen">
        <h1 id="special-text" style="color: white; font-size: 48px;"></h1>
        <div id="typing-text" class="typing-text"></div>
    </div>
    
    <div class="gold-screen" id="gold-screen"></div>
    <div class="red-screen" id="red-screen"></div>
    <div class="white-screen" id="white-screen"></div>
    <div class="blue-screen" id="blue-screen"></div>
    
    <script>
        // Игровые переменные
        let coins = 100000;
        let cooldownTime = 1;
        let isCooldown = false;
        let removedRarities = {
            normal: false,
            uncommon: false,
            epic: false,
            legendary: false,
            mythic: false,
            shadow: false,
            purple: false,
            king: false,
            angel: false
        };
        let library = [];
        
        // Настройки анимаций
        const animationSettings = {
            god: true,
            eternity: false,
            death: true,
            heart: true
        };
        
        // Шансы выпадения (в процентах)
        const baseChances = {
            normal: 33.33,
            uncommon: 20,
            epic: 10,
            legendary: 5,
            mythic: 2.86,
            shadow: 2,
            purple: 1.33,
            king: 1,
            angel: 0.5,
            god: 0.2,
            death: 0.06,
            eternity: 0.03,
            heart: 0.015,
            glitch: 0.025,
            blaster: 0.01,
            omega: 25
        };
        
        // Награды за каждую редкость (монеты)
        const rewards = {
            normal: 1,
            uncommon: 3,
            epic: 5,
            legendary: 10,
            mythic: 15,
            shadow: 25,
            purple: 35,
            king: 50,
            angel: 100,
            god: 500,
            death: 6666,
            eternity: 3500,
            heart: 6666,
            glitch: 4040,
            blaster: 10000,
            omega: 100000
        };
        
        // Текст для вечности
        const eternityText = "быть кем чтоб быть вечным, вечность это дар...";
        
        // Обновление интерфейса
        function updateUI() {
            document.getElementById('coins').textContent = coins;
            document.getElementById('current-cooldown').textContent = (cooldownTime / 1000).toFixed(1);
            
            // Проверка, хватает ли монет для покупок
            document.getElementById('upgrade-cooldown').disabled = coins < 25;
            document.getElementById('remove-normal').disabled = coins < 125 || removedRarities.normal;
            document.getElementById('remove-uncommon').disabled = coins < 250 || removedRarities.uncommon;
            document.getElementById('remove-epic').disabled = coins < 500 || removedRarities.epic;
            document.getElementById('remove-legendary').disabled = coins < 1000 || removedRarities.legendary;
            document.getElementById('remove-mythic').disabled = coins < 2000 || removedRarities.mythic;
            document.getElementById('remove-shadow').disabled = coins < 5000 || removedRarities.shadow;
            document.getElementById('remove-purple').disabled = coins < 7500 || removedRarities.purple;
            document.getElementById('remove-king').disabled = coins < 10000 || removedRarities.king;
            document.getElementById('remove-angel').disabled = coins < 25000 || removedRarities.angel;
            
            // Обновление кнопок удаления редкостей
            updateShopButtons();
            
            updateChancesDisplay();
        }
        
        function updateShopButtons() {
            const shopItems = {
                normal: document.getElementById('remove-normal'),
                uncommon: document.getElementById('remove-uncommon'),
                epic: document.getElementById('remove-epic'),
                legendary: document.getElementById('remove-legendary'),
                mythic: document.getElementById('remove-mythic'),
                shadow: document.getElementById('remove-shadow'),
                purple: document.getElementById('remove-purple'),
                king: document.getElementById('remove-king'),
                angel: document.getElementById('remove-angel')
            };
            
            for (const [rarity, button] of Object.entries(shopItems)) {
                if (removedRarities[rarity]) {
                    button.textContent = "Куплено";
                    button.disabled = true;
                }
            }
        }
        
        function updateChancesDisplay() {
            const chances = calculateAdjustedChances();
            const total = Object.values(chances).reduce((a, b) => a + b, 0);
            
            const chanceElements = {
                normal: document.querySelector('.normal-chance span:last-child'),
                uncommon: document.querySelector('.uncommon-chance span:last-child'),
                epic: document.querySelector('.epic-chance span:last-child'),
                legendary: document.querySelector('.legendary-chance span:last-child'),
                mythic: document.querySelector('.mythic-chance span:last-child'),
                shadow: document.querySelector('.shadow-chance span:last-child'),
                purple: document.querySelector('.purple-chance span:last-child'),
                king: document.querySelector('.king-chance span:last-child'),
                angel: document.querySelector('.angel-chance span:last-child'),
                god: document.querySelector('.god-chance span:last-child'),
                death: document.querySelector('.death-chance span:last-child'),
                eternity: document.querySelector('.eternity-chance span:last-child'),
                heart: document.querySelector('.heart-chance span:last-child'),
                glitch: document.querySelector('.glitch-chance span:last-child'),
                blaster: document.querySelector('.blaster-chance span:last-child'),
                omega: document.querySelector('.omega-chance span:last-child')
            };
            
            for (const [rarity, element] of Object.entries(chanceElements)) {
                if (element) {
                    element.textContent = `${(chances[rarity] / total * 100).toFixed(2)}%`;
                }
            }
            
            // Скрываем удаленные редкости
            document.querySelector('.normal-chance').style.display = removedRarities.normal ? 'none' : 'flex';
            document.querySelector('.uncommon-chance').style.display = removedRarities.uncommon ? 'none' : 'flex';
            document.querySelector('.epic-chance').style.display = removedRarities.epic ? 'none' : 'flex';
            document.querySelector('.legendary-chance').style.display = removedRarities.legendary ? 'none' : 'flex';
            document.querySelector('.mythic-chance').style.display = removedRarities.mythic ? 'none' : 'flex';
            document.querySelector('.shadow-chance').style.display = removedRarities.shadow ? 'none' : 'flex';
            document.querySelector('.purple-chance').style.display = removedRarities.purple ? 'none' : 'flex';
            document.querySelector('.king-chance').style.display = removedRarities.king ? 'none' : 'flex';
            document.querySelector('.angel-chance').style.display = removedRarities.angel ? 'none' : 'flex';
        }
        
        function calculateAdjustedChances() {
            let chances = {...baseChances};
            
            for (const rarity in removedRarities) {
                if (removedRarities[rarity]) {
                    chances[rarity] = 0;
                }
            }
            
            return chances;
        }
        
        function spin() {
            if (isCooldown) return;
            
            isCooldown = true;
            document.getElementById('spin-btn').disabled = true;
            
            const chances = calculateAdjustedChances();
            const totalChance = Object.values(chances).reduce((a, b) => a + b, 0);
            const random = Math.random() * totalChance;
            let cumulativeChance = 0;
            let resultRarity = '';
            
            for (const [key, value] of Object.entries(chances)) {
                cumulativeChance += value;
                if (random <= cumulativeChance) {
                    resultRarity = key;
                    break;
                }
            }
            
            processSpinResult(resultRarity);
        }
        
        function processSpinResult(rarity) {
            const result = translateRarity(rarity);
            const resultElement = document.getElementById('result');
            
            resultElement.textContent = result;
            resultElement.className = 'result ' + rarity;
            
            coins += rewards[rarity];
            
            if (!library.includes(rarity)) {
                library.push(rarity);
                updateLibrary();
            }
            
            // Проверяем настройки анимаций перед воспроизведением
            if (animationSettings[rarity] !== undefined ? animationSettings[rarity] : true) {
                switch(rarity) {
                    case 'god':
                        showSpecialAnimation(result, 'gold');
                        break;
                    case 'death':
                        showDeathAnimation(result);
                        break;
                    case 'eternity':
                        showEternityAnimation(result);
                        break;
                    case 'heart':
                        showHeartAnimation(result);
                        break;
                    case 'glitch':
                        resultElement.classList.add('glitch');
                        setTimeout(() => resultElement.classList.remove('glitch'), 3000);
                        break;
                    case 'blaster':
                        showBlasterAnimation();
                        break;
                    case 'omega':
                        showOmegaAnimation();
                        break;
                }
            }
            
            updateUI();
            startCooldown();
        }
        
        function translateRarity(rarity) {
            const translations = {
                normal: 'Обычно',
                uncommon: 'Необычно',
                epic: 'Эпик',
                legendary: 'Легенда',
                mythic: 'Миф',
                shadow: 'Тень',
                purple: 'Фиолетовый',
                king: 'КОРОЛЬ',
                angel: 'АНГЕЛ',
                god: 'БОЖЕСТВО',
                death: 'С М Е Р Т Ь',
                eternity: 'В Е Ч Н О С Т Ь',
                heart: 'С Е Р Д Ц Е',
                glitch: 'G L I T C H',
                blaster: 'B L A S T E R',
                omega: 'О М Е Г А'
            };
            return translations[rarity];
        }
        
        function startCooldown() {
            let remaining = cooldownTime / 1000;
            document.getElementById('cooldown').textContent = `Перезарядка: ${remaining.toFixed(1)} сек`;
            
            const interval = setInterval(() => {
                remaining -= 0.1;
                if (remaining <= 0) {
                    clearInterval(interval);
                    document.getElementById('cooldown').textContent = 'Готово к использованию';
                    document.getElementById('spin-btn').disabled = false;
                    isCooldown = false;
                } else {
                    document.getElementById('cooldown').textContent = `Перезарядка: ${remaining.toFixed(1)} сек`;
                }
            }, 100);
        }
        
        function showSpecialAnimation(text, type) {
            const darkScreen = document.getElementById('dark-screen');
            const effectScreen = document.getElementById(type === 'gold' ? 'gold-screen' : 'red-screen');
            const specialText = document.getElementById('special-text');
            
            specialText.textContent = text;
            specialText.style.color = type === 'gold' ? 'white' : 'black';
            
            darkScreen.style.opacity = '1';
            darkScreen.style.pointerEvents = 'auto';
            
            setTimeout(() => {
                darkScreen.style.opacity = '0';
                darkScreen.style.pointerEvents = 'none';
                effectScreen.style.opacity = '1';
                
                setTimeout(() => effectScreen.style.opacity = '0', 3000);
            }, 1500);
        }
        
        function showDeathAnimation(text) {
            const darkScreen = document.getElementById('dark-screen');
            const redScreen = document.getElementById('red-screen');
            const specialText = document.getElementById('special-text');
            const resultElement = document.getElementById('result');
            
            specialText.textContent = text;
            specialText.style.color = 'white';
            
            darkScreen.style.opacity = '1';
            darkScreen.style.pointerEvents = 'auto';
            
            setTimeout(() => {
                darkScreen.style.opacity = '0';
                darkScreen.style.pointerEvents = 'none';
                
                let blinkCount = 0;
                const blinkInterval = setInterval(() => {
                    redScreen.style.opacity = redScreen.style.opacity === '1' ? '0' : '1';
                    blinkCount++;
                    
                    if (blinkCount >= 50) {
                        clearInterval(blinkInterval);
                        redScreen.style.opacity = '0';
                        
                        const originalSize = resultElement.style.fontSize;
                        resultElement.style.fontSize = '160px';
                        
                        setTimeout(() => resultElement.style.fontSize = originalSize, 1000);
                    }
                }, 200);
            }, 1500);
        }
        
        function showEternityAnimation(text) {
            const darkScreen = document.getElementById('dark-screen');
            const whiteScreen = document.getElementById('white-screen');
            const specialText = document.getElementById('special-text');
            const typingText = document.getElementById('typing-text');
            const resultElement = document.getElementById('result');
            
            specialText.textContent = text;
            specialText.style.color = 'black';
            typingText.textContent = '';
            
            whiteScreen.style.opacity = '1';
            whiteScreen.style.pointerEvents = 'auto';
            
            let i = 0;
            const typingInterval = setInterval(() => {
                if (i < eternityText.length) {
                    typingText.textContent += eternityText.charAt(i);
                    i++;
                } else {
                    clearInterval(typingInterval);
                    
                    setTimeout(() => {
                        resultElement.classList.add('heart-beat');
                        
                        let blinkCount = 0;
                        const blinkInterval = setInterval(() => {
                            whiteScreen.style.opacity = whiteScreen.style.opacity === '1' ? '0' : '1';
                            blinkCount++;
                            
                            if (blinkCount >= 5) {
                                clearInterval(blinkInterval);
                                whiteScreen.style.opacity = '0';
                                resultElement.classList.remove('heart-beat');
                            }
                        }, 500);
                    }, 1000);
                }
            }, 15000 / eternityText.length);
            
            // Включаем возможность крутить снова
            setTimeout(() => {
                if (isCooldown) {
                    document.getElementById('spin-btn').disabled = false;
                    isCooldown = false;
                    document.getElementById('cooldown').textContent = 'Готово к использованию';
                }
            }, 100);
        }
        
        function showHeartAnimation(text) {
            const darkScreen = document.getElementById('dark-screen');
            const specialText = document.getElementById('special-text');
            const resultElement = document.getElementById('result');
            
            specialText.textContent = text;
            specialText.style.color = 'darkred';
            
            darkScreen.style.opacity = '1';
            darkScreen.style.pointerEvents = 'auto';
            darkScreen.style.backgroundColor = 'rgba(0,0,0,0.9)';
            
            setTimeout(() => {
                resultElement.classList.add('heart-beat');
                
                setTimeout(() => {
                    resultElement.classList.remove('heart-beat');
                    darkScreen.style.opacity = '0';
                    darkScreen.style.pointerEvents = 'none';
                }, 10000);
            }, 10000);
        }
        
        function showBlasterAnimation() {
            const blueScreen = document.getElementById('blue-screen');
            let blinkCount = 0;
            
            const blinkInterval = setInterval(() => {
                blueScreen.style.opacity = blueScreen.style.opacity === '1' ? '0' : '1';
                blinkCount++;
                
                if (blinkCount >= 10) {
                    clearInterval(blinkInterval);
                    blueScreen.style.opacity = '0';
                }
            }, 500);
        }
        
        function showOmegaAnimation() {
            const omegaAttack = document.createElement('div');
            omegaAttack.className = 'omega-attack';
            
            const darkScreen = document.createElement('div');
            darkScreen.className = 'omega-dark-screen';
            darkScreen.style.opacity = '0';
            
            const omegaText = document.createElement('div');
            omegaText.className = 'omega-text';
            omegaText.textContent = 'О М Е Г А';
            
            const heartsContainer = document.createElement('div');
            heartsContainer.className = 'omega-hearts-container';
            
            omegaAttack.appendChild(darkScreen);
            omegaAttack.appendChild(omegaText);
            omegaAttack.appendChild(heartsContainer);
            document.body.appendChild(omegaAttack);
            
            setTimeout(() => {
                darkScreen.style.opacity = '1';
                
                for (let i = 0; i < 7; i++) {
                    setTimeout(() => {
                        const heart = document.createElement('div');
                        heart.className = 'omega-heart';
                        heart.innerHTML = '❤';
                        heart.style.opacity = '1';
                        heart.style.animation = `omega-rotate ${5 + i}s linear infinite`;
                        heart.style.animationDelay = `${i * 0.2}s`;
                        heartsContainer.appendChild(heart);
                    }, 2000 * (i + 1));
                }
                
                setTimeout(() => {
                    heartsContainer.innerHTML = '';
                    omegaText.style.opacity = '1';
                    omegaText.style.animation = 'omega-shake 0.1s infinite';
                    
                    setTimeout(() => {
                        omegaText.style.animation = 'none';
                        setTimeout(() => omegaAttack.remove(), 1000);
                    }, 10000);
                }, 16000);
            }, 0);
        }
        
        function updateLibrary() {
            const libraryElement = document.getElementById('library-items');
            
            if (library.length === 0) {
                libraryElement.innerHTML = '<div class="library-item">Пока ничего не найдено...</div>';
                return;
            }
            
            libraryElement.innerHTML = '';
            library.sort().forEach(rarity => {
                const item = document.createElement('div');
                item.className = 'library-item';
                item.textContent = `${translateRarity(rarity)} (${rewards[rarity]} монет)`;
                item.style.color = getRarityColor(rarity);
                if (['god', 'death', 'eternity', 'heart', 'king', 'glitch', 'blaster', 'omega', 'angel', 'purple'].includes(rarity)) {
                    item.style.fontWeight = 'bold';
                }
                libraryElement.appendChild(item);
            });
        }
        
        function getRarityColor(rarity) {
            const colors = {
                normal: 'black',
                uncommon: 'green',
                epic: 'blue',
                legendary: 'purple',
                mythic: 'orange',
                shadow: 'gray',
                purple: '#8e44ad',
                king: 'gold',
                angel: 'lightblue',
                god: 'red',
                death: 'black',
                eternity: 'white',
                heart: 'darkred',
                glitch: '#9b59b6',
                blaster: '#3498db',
                omega: '#e74c3c'
            };
            return colors[rarity] || 'black';
        }
        
        function setupShop() {
            document.getElementById('upgrade-cooldown').addEventListener('click', () => {
                if (coins >= 25) {
                    coins -= 25;
                    cooldownTime -= 500;
                    updateUI();
                }
            });
            
            document.getElementById('remove-normal').addEventListener('click', () => {
                if (coins >= 125 && !removedRarities.normal) {
                    coins -= 125;
                    removedRarities.normal = true;
                    updateUI();
                }
            });
            
            document.getElementById('remove-uncommon').addEventListener('click', () => {
                if (coins >= 250 && !removedRarities.uncommon) {
                    coins -= 250;
                    removedRarities.uncommon = true;
                    updateUI();
                }
            });
            
            document.getElementById('remove-epic').addEventListener('click', () => {
                if (coins >= 500 && !removedRarities.epic) {
                    coins -= 500;
                    removedRarities.epic = true;
                    updateUI();
                }
            });
            
            document.getElementById('remove-legendary').addEventListener('click', () => {
                if (coins >= 1000 && !removedRarities.legendary) {
                    coins -= 1000;
                    removedRarities.legendary = true;
                    updateUI();
                }
            });
            
            document.getElementById('remove-mythic').addEventListener('click', () => {
                if (coins >= 2000 && !removedRarities.mythic) {
                    coins -= 2000;
                    removedRarities.mythic = true;
                    updateUI();
                }
            });
            
            document.getElementById('remove-shadow').addEventListener('click', () => {
                if (coins >= 5000 && !removedRarities.shadow) {
                    coins -= 5000;
                    removedRarities.shadow = true;
                    updateUI();
                }
            });
            
            document.getElementById('remove-purple').addEventListener('click', () => {
                if (coins >= 7500 && !removedRarities.purple) {
                    coins -= 7500;
                    removedRarities.purple = true;
                    updateUI();
                }
            });
            
            document.getElementById('remove-king').addEventListener('click', () => {
                if (coins >= 10000 && !removedRarities.king) {
                    coins -= 10000;
                    removedRarities.king = true;
                    updateUI();
                }
            });
            
            document.getElementById('remove-angel').addEventListener('click', () => {
                if (coins >= 25000 && !removedRarities.angel) {
                    coins -= 25000;
                    removedRarities.angel = true;
                    updateUI();
                }
            });
        }
        
        function setupSettings() {
            document.getElementById('toggle-god').addEventListener('change', function() {
                animationSettings.god = this.checked;
            });
            
            document.getElementById('toggle-eternity').addEventListener('change', function() {
                animationSettings.eternity = this.checked;
            });
            
            document.getElementById('toggle-death').addEventListener('change', function() {
                animationSettings.death = this.checked;
            });
            
            document.getElementById('toggle-heart').addEventListener('change', function() {
                animationSettings.heart = this.checked;
            });
        }
        
        function init() {
            document.getElementById('spin-btn').addEventListener('click', spin);
            setupShop();
            setupSettings();
            updateUI();
        }
        
        window.onload = init;
    </script>
</body>
</html>
