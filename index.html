<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—Ä–∫–æ–≤–Ω–∞—è —Ñ–µ—Ä–º–∞ PRO</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #f0f8ff;
            padding: 10px;
            margin: 0;
            touch-action: manipulation;
        }
        .container {
            display: flex;
            flex-direction: column;
            max-width: 800px;
            margin: 0 auto;
        }
        .garden {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }
        .plot {
            aspect-ratio: 1/1;
            border: 2px dashed #aaa;
            position: relative;
            cursor: pointer;
            background: #e9f5e9;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .plant-icon {
            font-size: 30px;
            margin-bottom: 5px;
        }
        .inventory-section, .shop-section {
            border: 2px solid #4CAF50;
            padding: 10px;
            margin: 10px 0;
            border-radius: 10px;
            background: white;
        }
        .item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background: #f8f8f8;
            border-radius: 5px;
        }
        button {
            padding: 8px 12px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            min-width: 80px;
        }
        button:disabled {
            background: #cccccc;
        }
        .stats {
            font-size: 18px;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        .carrot-type {
            font-weight: bold;
        }
        .normal { color: #2E8B57; }
        .rare { color: #4169E1; }
        .epic { color: #9370DB; }
        .legendary { color: #FF8C00; }
        .progress-container {
            width: 80%;
            height: 6px;
            background: #ddd;
            margin-top: 5px;
            border-radius: 3px;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: #4CAF50;
            width: 0%;
        }
        .selected {
            box-shadow: 0 0 0 3px #4CAF50;
        }
        .sell-all-btn {
            background: #FF6347;
            margin-top: 10px;
            width: 100%;
        }
        .water-btn {
            background: #1E90FF;
            margin-top: 5px;
        }
        .rarity-tag {
            font-size: 12px;
            padding: 2px 5px;
            border-radius: 3px;
            margin-left: 5px;
        }
        .common { background: #808080; color: white; }
        .rare { background: #4169E1; color: white; }
        .epic { background: #9370DB; color: white; }
        .legendary { background: #FF8C00; color: white; }
        .shop-quantity {
            font-weight: bold;
            margin: 0 5px;
        }
        .sold-out {
            color: #FF0000;
            font-weight: bold;
        }
        @media (min-width: 600px) {
            .container {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            .garden-container {
                order: 1;
                width: 60%;
            }
            .inventory-section {
                order: 2;
                width: 35%;
            }
            .shop-section {
                order: 3;
                width: 100%;
            }
            .garden {
                grid-template-columns: repeat(3, 120px);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="garden-container">
            <h2>–ì—Ä—è–¥–∫–∞</h2>
            <div class="garden" id="garden"></div>
        </div>
        
        <div class="stats">
            <span>–ë–∞–ª–∞–Ω—Å: <span id="money">50</span>¬¢</span>
            <span>–õ–µ–π–∫–∞: <span id="watering-can">–Ω–µ—Ç</span></span>
            <button class="sell-all-btn" onclick="startSellingAll()">–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–¥–∞–∂–∞ (10 —Å–µ–∫)</button>
        </div>
        
        <div class="inventory-section">
            <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
            <h3>–°–µ–º–µ–Ω–∞</h3>
            <div id="seed-inventory"></div>
            <h3>–ú–æ—Ä–∫–æ–≤—å</h3>
            <div id="carrot-inventory"></div>
            <h3>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h3>
            <div id="tools-inventory"></div>
        </div>
        
        <div class="shop-section">
            <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
            <div id="shop-items"></div>
            <div class="item">
                <span>–õ–µ–π–∫–∞ (–ø–æ–ª–∏–≤ -10 —Å–µ–∫)</span>
                <span>125¬¢</span>
                <button id="buy-watering-can" onclick="buyWateringCan()">–ö—É–ø–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const gameData = {
            money: 50,
            seeds: {
                normal: 0,
                golden: 0,
                diamond: 0,
                rainbow: 0,
                electric: 0
            },
            carrots: [],
            plots: Array(9).fill(null),
            selectedSeed: null,
            isSelling: false,
            hasWateringCan: false,
            shopItems: {
                normal: { quantity: 4 },
                golden: { quantity: 2 },
                diamond: { quantity: 1 },
                rainbow: { quantity: 1 },
                electric: { quantity: 0 }
            }
        };
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function loadGame() {
            const savedData = localStorage.getItem('carrotFarmSave');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                Object.assign(gameData, parsedData);
                
                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–≤ —Ä–æ—Å—Ç–∞
                gameData.plots.forEach((plot, index) => {
                    if (plot && plot.growing) {
                        const elapsed = Date.now() - plot.startTime;
                        if (elapsed >= plot.growthTime) {
                            // –ú–æ—Ä–∫–æ–≤—å —É–∂–µ –≤—ã—Ä–æ—Å–ª–∞
                            gameData.plots[index].growing = false;
                        } else {
                            // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–æ—Å—Ç
                            const remainingTime = plot.growthTime - elapsed;
                            setTimeout(() => {
                                if (gameData.plots[index]) {
                                    gameData.plots[index].growing = false;
                                    updateUI();
                                }
                            }, remainingTime);
                        }
                    }
                });
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            localStorage.setItem('carrotFarmSave', JSON.stringify(gameData));
        }
        
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ—Ä–∫–æ–≤–∏
        const carrotConfig = {
            normal: {
                name: "–û–±—ã—á–Ω–∞—è",
                rarity: "common",
                buyPrice: 20,
                growthTime: 20000, // 20 —Å–µ–∫
                weightRange: [0.5, 17],
                sellPrices: [
                    { max: 1, price: 15 },
                    { max: 5, price: 40 },
                    { max: 10, price: 150 },
                    { max: Infinity, price: 200 }
                ],
                alwaysInShop: true
            },
            golden: {
                name: "–ó–æ–ª–æ—Ç–∞—è",
                rarity: "common",
                buyPrice: 200,
                growthTime: 40000, // 40 —Å–µ–∫
                weightRange: [2, 25],
                sellPrices: [
                    { max: 5, price: 250 },
                    { max: 10, price: 400 },
                    { max: 15, price: 600 },
                    { max: 19, price: 800 },
                    { max: Infinity, price: 1100 }
                ],
                shopChance: 0.8
            },
            diamond: {
                name: "–ê–ª–º–∞–∑–Ω–∞—è",
                rarity: "rare",
                buyPrice: 2000,
                growthTime: 110000, // 110 —Å–µ–∫
                weightRange: [4, 19],
                sellPrices: [
                    { max: 8, price: 5000 },
                    { max: 12, price: 4000 },
                    { max: 16, price: 3000 },
                    { max: Infinity, price: 7000 }
                ],
                shopChance: 0.5
            },
            rainbow: {
                name: "–†–∞–¥—É–∂–Ω–∞—è",
                rarity: "epic",
                buyPrice: 15000,
                growthTime: 250000, // 250 —Å–µ–∫
                weightRange: [9, 19],
                sellPrices: [
                    { max: 15, price: 17500 },
                    { max: Infinity, price: 25000 }
                ],
                shopChance: 0.3
            },
            electric: {
                name: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è",
                rarity: "legendary",
                buyPrice: 100000,
                growthTime: 1000000, // 1000 —Å–µ–∫
                weightRange: [50, 100],
                sellPrice: 200000,
                shopChance: 0.1
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            initGarden();
            updateShop();
            updateUI();
            setupEventListeners();
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(saveGame, 30000);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä—è–¥–∫–∏
        function initGarden() {
            const garden = document.getElementById('garden');
            garden.innerHTML = '';
            
            gameData.plots.forEach((plot, index) => {
                const plotEl = document.createElement('div');
                plotEl.className = 'plot';
                plotEl.dataset.index = index;
                garden.appendChild(plotEl);
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
        function updateShop() {
            // –û–±—ã—á–Ω–∞—è –º–æ—Ä–∫–æ–≤—å –≤—Å–µ–≥–¥–∞ –≤ –Ω–∞–ª–∏—á–∏–∏
            if (gameData.shopItems.normal.quantity <= 0) {
                gameData.shopItems.normal.quantity = 4;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥—Ä—É–≥–∏–µ —Å–µ–º–µ–Ω–∞ –ø–æ —à–∞–Ω—Å—É
            Object.keys(carrotConfig).forEach(type => {
                if (type === 'normal') return;
                
                const config = carrotConfig[type];
                if (gameData.shopItems[type].quantity <= 0 && Math.random() < config.shopChance) {
                    gameData.shopItems[type].quantity = type === 'golden' ? 2 : 1;
                }
            });
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            document.querySelectorAll('.plot').forEach(plot => {
                // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
                plot.addEventListener('touchstart', handlePlotTouch, { passive: false });
                // –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–æ–≤
                plot.addEventListener('click', handlePlotClick);
            });
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Å–∞–Ω–∏—è –Ω–∞ –≥—Ä—è–¥–∫–µ (–º–æ–±–∏–ª—å–Ω—ã–µ)
        function handlePlotTouch(e) {
            e.preventDefault();
            const plotIndex = parseInt(e.currentTarget.dataset.index);
            handlePlotAction(plotIndex);
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –≥—Ä—è–¥–∫–µ (–¥–µ—Å–∫—Ç–æ–ø)
        function handlePlotClick(e) {
            const plotIndex = parseInt(e.currentTarget.dataset.index);
            handlePlotAction(plotIndex);
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≥—Ä—è–¥–∫–æ–π
        function handlePlotAction(plotIndex) {
            const plot = gameData.plots[plotIndex];
            
            if (!plot) {
                // –ü—É—Å—Ç–∞—è –≥—Ä—è–¥–∫–∞ - –ø–æ–ø—ã—Ç–∫–∞ –ø–æ—Å–∞–¥–∏—Ç—å
                if (gameData.selectedSeed) {
                    plantCarrot(plotIndex, gameData.selectedSeed);
                } else {
                    alert("–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å–µ–º–µ–Ω–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ!");
                }
            } else if (plot.growing && gameData.hasWateringCan) {
                // –ü–æ–ª–∏–≤ —Ä–∞—Å—Ç—É—â–µ–π –º–æ—Ä–∫–æ–≤–∏
                waterCarrot(plotIndex);
            } else if (!plot.growing) {
                // –ì–æ—Ç–æ–≤–∞—è –º–æ—Ä–∫–æ–≤—å - —Å–±–æ—Ä
                harvestCarrot(plotIndex);
            } else {
                // –ú–æ—Ä–∫–æ–≤—å —Ä–∞—Å—Ç–µ—Ç - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                const elapsed = Date.now() - plot.startTime;
                const remaining = Math.ceil((plot.growthTime - elapsed) / 1000);
                alert(`–ú–æ—Ä–∫–æ–≤—å —Ä–∞—Å—Ç–µ—Ç! –û—Å—Ç–∞–ª–æ—Å—å: ${remaining} —Å–µ–∫`);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –î–µ–Ω—å–≥–∏
            document.getElementById('money').textContent = gameData.money;
            
            // –õ–µ–π–∫–∞
            const wateringCanText = gameData.hasWateringCan ? '–µ—Å—Ç—å' : '–Ω–µ—Ç';
            document.getElementById('watering-can').textContent = wateringCanText;
            document.getElementById('buy-watering-can').textContent = 
                gameData.hasWateringCan ? '–ö—É–ø–ª–µ–Ω–æ' : '–ö—É–ø–∏—Ç—å';
            document.getElementById('buy-watering-can').disabled = gameData.hasWateringCan;
            
            // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å–µ–º—è–Ω
            const seedInventory = document.getElementById('seed-inventory');
            seedInventory.innerHTML = '';
            
            Object.entries(gameData.seeds).forEach(([type, count]) => {
                if (count > 0) {
                    const config = carrotConfig[type];
                    const seedItem = document.createElement('div');
                    seedItem.className = `item ${type === gameData.selectedSeed ? 'selected' : ''}`;
                    seedItem.innerHTML = `
                        <span class="carrot-type ${config.rarity}">
                            ${config.name}
                            <span class="rarity-tag ${config.rarity}">${config.rarity}</span>
                            : ${count}
                        </span>
                        <button onclick="selectSeed('${type}')">–í—ã–±—Ä–∞—Ç—å</button>
                    `;
                    seedInventory.appendChild(seedItem);
                }
            });
            
            if (Object.values(gameData.seeds).every(count => count === 0)) {
                seedInventory.innerHTML = '<div>–ù–µ—Ç —Å–µ–º—è–Ω</div>';
            }
            
            // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –º–æ—Ä–∫–æ–≤–∏
            const carrotInventory = document.getElementById('carrot-inventory');
            if (gameData.carrots.length > 0) {
                carrotInventory.innerHTML = gameData.carrots.map((carrot, index) => {
                    const config = carrotConfig[carrot.type];
                    return `
                        <div class="item">
                            <span class="carrot-type ${config.rarity}">
                                ${getCarrotIcon(carrot.type)} ${carrot.weight}–∫–≥ 
                                (${config.name})
                                <span class="rarity-tag ${config.rarity}">${config.rarity}</span>
                            </span>
                            <button onclick="sellCarrot(${index})">${carrot.price}¬¢</button>
                        </div>
                    `;
                }).join('');
            } else {
                carrotInventory.innerHTML = '<div>–ù–µ—Ç –º–æ—Ä–∫–æ–≤–∏</div>';
            }
            
            // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
            const toolsInventory = document.getElementById('tools-inventory');
            toolsInventory.innerHTML = `
                <div class="item">
                    <span>–õ–µ–π–∫–∞</span>
                    <span>${wateringCanText}</span>
                    ${gameData.hasWateringCan ? '<button class="water-btn" onclick="selectWateringCan()">–í—ã–±—Ä–∞—Ç—å</button>' : ''}
                </div>
            `;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä—è–¥–∫–∏
            gameData.plots.forEach((plot, index) => {
                const plotEl = document.querySelector(`.plot[data-index="${index}"]`);
                if (plot) {
                    plotEl.innerHTML = `
                        <div class="plant-icon">${getGrowthIcon(plot.type, plot.growing)}</div>
                        <div>${plot.growing ? '–†–∞—Å—Ç—ë—Ç...' : '–ì–æ—Ç–æ–≤–æ!'}</div>
                        ${plot.growing ? `
                            <div class="progress-container">
                                <div class="progress" id="progress-${index}"></div>
                            </div>
                            ${gameData.hasWateringCan ? '<button class="water-btn" onclick="waterCarrot(${index})">–ü–æ–ª–∏—Ç—å (-10 —Å–µ–∫)</button>' : ''}
                        ` : ''}
                    `;
                    
                    if (plot.growing) {
                        const elapsed = Date.now() - plot.startTime;
                        const progress = (elapsed / plot.growthTime) * 100;
                        const progressEl = document.getElementById(`progress-${index}`);
                        if (progressEl) {
                            progressEl.style.width = `${Math.min(progress, 100)}%`;
                        }
                    }
                } else {
                    plotEl.innerHTML = '<div>–ü—É—Å—Ç–æ</div>';
                }
            });
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
            const shopItems = document.getElementById('shop-items');
            shopItems.innerHTML = '';
            
            Object.entries(gameData.shopItems).forEach(([type, item]) => {
                const config = carrotConfig[type];
                const shopItem = document.createElement('div');
                shopItem.className = 'item';
                
                if (item.quantity > 0) {
                    shopItem.innerHTML = `
                        <span class="carrot-type ${config.rarity}">
                            ${config.name} <span class="rarity-tag ${config.rarity}">${config.rarity}</span>
                            <span class="shop-quantity">√ó${item.quantity}</span>
                        </span>
                        <span>${config.buyPrice}¬¢</span>
                        <button onclick="buySeedFromShop('${type}')" ${gameData.money < config.buyPrice ? 'disabled' : ''}>
                            ${gameData.money < config.buyPrice ? '–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç' : '–ö—É–ø–∏—Ç—å'}
                        </button>
                    `;
                } else {
                    shopItem.innerHTML = `
                        <span class="sold-out">${config.name} - –ü–†–û–î–ê–ù–û</span>
                        <span>-</span>
                        <button disabled>–ü–†–û–î–ê–ù–û</button>
                    `;
                }
                
                shopItems.appendChild(shopItem);
            });
            
            saveGame();
        }
        
        // –í—ã–±–æ—Ä —Å–µ–º—è–Ω
        function selectSeed(type) {
            gameData.selectedSeed = type;
            updateUI();
        }
        
        // –í—ã–±–æ—Ä –ª–µ–π–∫–∏
        function selectWateringCan() {
            gameData.selectedSeed = null;
            updateUI();
        }
        
        // –ü–æ–∫—É–ø–∫–∞ —Å–µ–º—è–Ω –≤ –º–∞–≥–∞–∑–∏–Ω–µ
        function buySeedFromShop(type) {
            const config = carrotConfig[type];
            const shopItem = gameData.shopItems[type];
            
            if (shopItem.quantity <= 0) return;
            if (gameData.money < config.buyPrice) return;
            
            gameData.money -= config.buyPrice;
            gameData.seeds[type]++;
            shopItem.quantity--;
            
            // –ï—Å–ª–∏ –æ–±—ã—á–Ω–∞—è –º–æ—Ä–∫–æ–≤—å –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å, –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –ø–∞—Ä—Ç–∏—é
            if (type === 'normal' && shopItem.quantity <= 0) {
                shopItem.quantity = 4;
            }
            
            updateUI();
        }
        
        // –ü–æ–∫—É–ø–∫–∞ –ª–µ–π–∫–∏
        function buyWateringCan() {
            if (gameData.hasWateringCan || gameData.money < 125) return;
            
            gameData.money -= 125;
            gameData.hasWateringCan = true;
            updateUI();
        }
        
        // –ü–æ—Å–∞–¥–∫–∞ –º–æ—Ä–∫–æ–≤–∏
        function plantCarrot(plotIndex, type) {
            if (gameData.seeds[type] <= 0) return;
            
            gameData.seeds[type]--;
            const growthTime = carrotConfig[type].growthTime;
            
            gameData.plots[plotIndex] = {
                type: type,
                growing: true,
                startTime: Date.now(),
                growthTime: growthTime,
                originalGrowthTime: growthTime
            };
            
            updateUI();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–æ—Å—Ç–∞
            const growthInterval = setInterval(() => {
                if (!gameData.plots[plotIndex]) {
                    clearInterval(growthInterval);
                    return;
                }
                
                const plot = gameData.plots[plotIndex];
                const elapsed = Date.now() - plot.startTime;
                
                if (elapsed >= plot.growthTime) {
                    gameData.plots[plotIndex].growing = false;
                    clearInterval(growthInterval);
                    updateUI();
                }
            }, 1000);
        }
        
        // –ü–æ–ª–∏–≤ –º–æ—Ä–∫–æ–≤–∏
        function waterCarrot(plotIndex) {
            const plot = gameData.plots[plotIndex];
            if (!plot || !plot.growing) return;
            
            // –£–º–µ–Ω—å—à–∞–µ–º –≤—Ä–µ–º—è —Ä–æ—Å—Ç–∞, –Ω–æ –Ω–µ –º–µ–Ω—å—à–µ 10 —Å–µ–∫—É–Ω–¥
            const newGrowthTime = Math.max(10000, plot.growthTime - 10000);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            const progress = (Date.now() - plot.startTime) / plot.growthTime;
            plot.growthTime = newGrowthTime;
            plot.startTime = Date.now() - (progress * newGrowthTime);
            
            updateUI();
        }
        
        // –°–±–æ—Ä —É—Ä–æ–∂–∞—è
        function harvestCarrot(plotIndex) {
            const plot = gameData.plots[plotIndex];
            if (!plot || plot.growing) return;
            
            const type = plot.type;
            let weight = getRandomWeight(type);
            
            // –û—Å–æ–±—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–µ–¥–∫–∏—Ö –º–æ—Ä–∫–æ–≤–æ–∫
            if (type === 'rainbow' && Math.random() < 0.05) { // 5% —à–∞–Ω—Å –Ω–∞ 10+ –∫–≥
                weight = (Math.random() * 9 + 10).toFixed(1); // 10-19 –∫–≥
            }
            
            const price = calculatePrice(type, weight);
            
            gameData.carrots.push({
                type: type,
                weight: weight,
                price: price
            });
            
            gameData.plots[plotIndex] = null;
            updateUI();
        }
        
        // –ü—Ä–æ–¥–∞–∂–∞ –æ–¥–Ω–æ–π –º–æ—Ä–∫–æ–≤–∏
        function sellCarrot(index) {
            gameData.money += gameData.carrots[index].price;
            gameData.carrots.splice(index, 1);
            updateUI();
        }
        
        // –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–¥–∞–∂–∞ –≤—Å–µ–≥–æ (10 —Å–µ–∫)
        function startSellingAll() {
            if (gameData.isSelling || gameData.carrots.length === 0) return;
            
            gameData.isSelling = true;
            const sellBtn = document.querySelector('.sell-all-btn');
            sellBtn.disabled = true;
            sellBtn.textContent = "–ü—Ä–æ–¥–∞–∂–∞...";
            
            const totalValue = gameData.carrots.reduce((sum, carrot) => sum + carrot.price, 0);
            const carrotsCount = gameData.carrots.length;
            const stepTime = 10000 / carrotsCount; // 10 —Å–µ–∫ –Ω–∞ –≤—Å–µ
            
            let sold = 0;
            const sellInterval = setInterval(() => {
                if (gameData.carrots.length > 0) {
                    gameData.money += gameData.carrots[0].price;
                    gameData.carrots.shift();
                    sold++;
                    updateUI();
                }
                
                if (sold >= carrotsCount) {
                    clearInterval(sellInterval);
                    gameData.isSelling = false;
                    sellBtn.disabled = false;
                    sellBtn.textContent = "–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–¥–∞–∂–∞ (10 —Å–µ–∫)";
                    alert(`–ü—Ä–æ–¥–∞–Ω–æ ${carrotsCount} –º–æ—Ä–∫–æ–≤–æ–∫ –∑–∞ ${totalValue}¬¢!`);
                }
            }, stepTime);
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤–µ—Å–∞
        function getRandomWeight(type) {
            const [min, max] = carrotConfig[type].weightRange;
            return (Math.random() * (max - min) + min).toFixed(1);
        }
        
        // –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã
        function calculatePrice(type, weight) {
            weight = parseFloat(weight);
            
            if (type === 'electric') {
                return carrotConfig.electric.sellPrice;
            }
            
            const priceTable = carrotConfig[type].sellPrices;
            
            for (const tier of priceTable) {
                if (weight <= tier.max) {
                    return tier.price;
                }
            }
            return priceTable[priceTable.length - 1].price;
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –º–æ—Ä–∫–æ–≤–∏
        function getCarrotIcon(type) {
            switch (type) {
                case 'golden': return 'ü•ï‚ú®';
                case 'diamond': return 'üíéü•ï';
                case 'rainbow': return 'üåàü•ï';
                case 'electric': return '‚ö°ü•ï';
                default: return 'ü•ï';
            }
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ —Ä–æ—Å—Ç–∞
        function getGrowthIcon(type, growing) {
            return growing ? 'üå±' : getCarrotIcon(type);
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.onload = initGame;
    </script>
</body>
</html>
